CREATE DATABASE BD_PAYSCHOOLEASYSOFT;

CREATE TABLE TIPO_USUARIO
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
DESCRIPCION VARCHAR(20),
BORRADO BOOLEAN
);

CREATE TABLE USUARIO
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
DNI VARCHAR(8) NOT NULL,
NOMBRE VARCHAR(20),
APELLIDO  VARCHAR(20),
EMAIL VARCHAR(50),
PSW VARCHAR(20),
ID_TIPO BIGINT NOT NULL,
FOREIGN KEY (ID_TIPO) REFERENCES TIPO_USUARIO (ID),
TELEFONO VARCHAR(8),
DIRECCION  VARCHAR(50)
);

CREATE TABLE NIVEL
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
DESCRIPCION VARCHAR(10),
MONTO_MATRICULA DECIMAL(3,2),
DESCUENTO DECIMAL(3,2)
);
  
 CREATE TABLE CUOTA
 (
 ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
 ID_CURSO BIGINT,
 FOREIGN KEY (ID_CURSO) REFERENCES CURSO (ID),
 ANO INT,
 MONTO_CUOTA DECIMAL (3,2),
 FECHAVENC1 DATETIME,
 FECHAVENC2 DATETIME
 );   
  
CREATE TABLE ALUMNO
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
DNI VARCHAR(8) NOT NULL,
NOMBRE VARCHAR(20),
APELLIDO  VARCHAR(20),
FECHA_NACIMIENTO DATETIME,
NRO_MATRICULA INT,
ID_USUARIO BIGINT,
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID),
ID_NIVEL BIGINT,
FOREIGN KEY (ID_NIVEL) REFERENCES NIVEL (ID),
BORRADO BOOLEAN
);

CREATE TABLE CURSO
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
CUPO INT,
ID_NIVEL BIGINT,
FOREIGN KEY (ID_NIVEL) REFERENCES NIVEL (ID),
)
 
CREATE TABLE INSCRIPCION
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
ID_ALUMNO BIGINT,
FOREIGN KEY (ID_ALUMNO) REFERENCES ALUMNO (ID));
FECHA_INSCRIPCION DATETIME,
INSCRIPTO BOOLEAN
 );

 
CREATE TABLE FACTURA
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
FECHA_EMISION DATETIME,
IMPORTE_TOTAL DECIMAL(3,2),
);

CREATE TABLE MATRICULA
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
ANO INT,
MONTO DECIMAL (3,2),
DESCUENTO DECIMAL (1,2)
);

CREATE TABLE RECARGOS
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
PORCENTAJE_VENC1 DECIMAL (1,2),
PORCENTAJE_VENC2 DECIMAL (1,2)
);

CREATE TABLE PAGO
(
ID BIGINT IDENTITY (1,1) NOT NULL PRIMARY KEY,
ID_CUOTA BIGINT,
FOREIGN KEY (ID_CUOTA) REFERENCES CUOTA (ID),
ID_ALUMNO BIGINT
FOREIGN KEY (ID_ALUMNO) REFERENCES ALUMNO (ID),
ID_FACTURA BIGINT,
FOREIGN KEY (ID_BIGINT) REFERENCES FACTURA (ID),
ID_MATRICULA BIGINT,
FOREIGN KEY (ID_MATRICULA) REFERENCES MATRICULA (ID),
ID_RECARGOS BIGINT,
FOREIGN KEY (ID_RECARGOS) REFERENCES RECARGOS (ID)
);